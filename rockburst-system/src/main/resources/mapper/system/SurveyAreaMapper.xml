<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SurveyAreaMapper">

    <!--分页查询-->
    <select id="selectSurveyAreaByPage" parameterType="com.ruoyi.system.domain.dto.SurveySelectDTO" resultType="com.ruoyi.system.domain.vo.SurveyAreaVO">
        select
            sa.survey_area_id as surveyAreaId,
            sa.survey_area_name as surveyAreaName,
            sa.workface_id as workFaceId,
            sa.mining_area_id as miningAreaId,
            sa.tunnel_id as tunnelId,
            sa.critical_braize as criticalBraize,
            sa.left_gang as leftGang,
            sa.right_gang as rightGang,
            sa.create_time as creatTime
        from survey_area as sa
        <where>
            <if test="surveyAreaName != null and surveyAreaName != ''">
                and sa.survey_area_name like concat('%',#{surveyAreaName},'%')
            </if>
            <if test="workFaceId != null and workFaceId != ''">
                and sa.workface_id = #{workFaceId}
            </if>
            <if test="miningAreaId != null and miningAreaId != ''">
                and sa.mining_area_id = #{miningAreaId}
            </if>
            <if test="tunnelId != null and tunnelId != ''">
                and sa.tunnel_id = #{tunnelId}
            </if>
            <if test="startTime != null and startTime != ''">
                and sa.create_time &gt;= #{startTime}
            </if>
            <if test="endTime != null and endTime != ''">
                and sa.create_time &lt;= #{endTime}
            </if>
            and sa.del_flag = '0'
        </where>
        order by sa.create_time desc
    </select>
</mapper>